<html>
<head>
	<title>Tris Game</title>
	<meta charset="UTF-8">
	<!-- CSS -->
	<style>
		/* Style of the grid */
		.trisgrid {
			width:168px;
			height:168px;
			padding:0px;
			border:1px solid black;
			margin:3px;
		}
		/* Style of every grid's box */
		.trisgrid>div {
			/* Dimensioning and positioning properties */
			width:50px;
			height:50px;
			padding:1px;
			border:1px solid black;
			margin:1px;
			float:left;
			/* Appearance properties */
			text-align:center;
			font:40px sans-serif;
		}
	</style>
	<!-- JQuery  -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<!-- JQuery functions and variables -->
	<script>
		var endGame = false;
		var userName = "user", computerName = "PC";
		var charToken = [];
		charToken[userName] = "X";
		charToken[computerName] = "0";

		var trisGrid = new Array();
		var combinationsOfTrisBoxes = [ [0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6] ];
		function computerEngine() {
			// Fill the first box that's empty
			for (var i = 0; i<9; i++) {
				if (trisGrid[i] == undefined) {
					fillABox(computerName,i,"box"+i);
					break;
				}
			}
			return;
		}

		function checkTris(name) {
			var token = charToken[name];
			for (var i = 0; i<combinationsOfTrisBoxes.length; i++) {
				if (trisGrid[combinationsOfTrisBoxes[i][0]] == token && trisGrid[combinationsOfTrisBoxes[i][1]] == token && trisGrid[combinationsOfTrisBoxes[i][2]] == token) {
					endGame = true;
					alert(name + " win");
					return true;
				}
			}
		}
		function fillABox(name,boxIndex,boxIndexString) {
			var token = charToken[name];
			$("div > ." + boxIndexString).html(token);
			trisGrid[boxIndex] = token;
		}
		function resetGame() {
			$("div[class^='box']").text("");
			endGame = false;
			trisGrid = [];
		}
	</script>
	<!-- JQuery TRIS ENGINE -->
	<script>
		$(document).ready(function(){
			$("div.trisgrid > div").click(function(){
				if (endGame == false) {
					var boxIndexString = $(this).attr("class");
					var boxIndex = boxIndexString[3];
					if (trisGrid[boxIndex] == undefined) {
						fillABox(userName,boxIndex,boxIndexString);
						if (!checkTris(userName)) {
							computerEngine();
							checkTris(computerName);
						}
					}
				}
			});

			$("#pctoken").on("change", function() {
				charToken[userName] = $(this).val();
			});
		});
	</script>
</head>
<body>
	<div>
		<table>
			<tr>
				<td>User token</td>
				<td><input type="text" id="utoken" maxlength="1" value="X" /></td>
			</tr>
			<tr>
				<td>PC token</td>
				<td><input type="text" id="pctoken" maxlength="1" value="O" /></td>
			</tr>
		</table>
	</div>
	<div class="trisgrid">
		<div class="box0"></div>
		<div class="box1"></div>
		<div class="box2"></div>
		<div class="box3"></div>
		<div class="box4"></div>
		<div class="box5"></div>
		<div class="box6"></div>
		<div class="box7"></div>
		<div class="box8"></div>
	</div>
	<a href="javascript:void(0);" onclick="javascript:resetGame();">New Game</a>
</body>

</html>
